<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 flex items-center justify-center min-h-screen">
  <div class="bg-gray-800 p-8 rounded-2xl shadow-md w-full max-w-md">
    <h2 class="text-3xl font-bold text-white mb-6 text-center">Login</h2>
    <form onsubmit="return handleLogin(event)" class="space-y-4">
      <div>
        <label class="block text-gray-300 mb-1">Username</label>
        <input id="username" type="text" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-white focus:outline-none">
      </div>
      <div>
        <label class="block text-gray-300 mb-1">Password</label>
        <div class="relative">
          <input id="password" type="password" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-white focus:outline-none">
          <button type="button" id="togglePwd" class="absolute right-2 top-2 text-gray-400 text-sm">Show</button>
        </div>
      </div>
      <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded-lg">Login</button>
    </form>
    <p id="message" class="mt-4 text-center text-sm"></p>
    <p class="mt-1 text-center text-sm text-yellow-400" id="licenseInfo"></p>
    <p class="mt-4 text-center text-gray-400 text-xs">&copy; <span id="year"></span> All rights reserved.</p>
  </div>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

const pwd = document.getElementById('password');
const toggle = document.getElementById('togglePwd');
toggle.addEventListener('click', () => {
  if (pwd.type === 'password') {
    pwd.type = 'text';
    toggle.textContent = 'Hide';
  } else {
    pwd.type = 'password';
    toggle.textContent = 'Show';
  }
});

function handleLogin(e){
  e.preventDefault();
  const u = document.getElementById('username').value.trim();
  const p = document.getElementById('password').value.trim();
  const message = document.getElementById('message');
  const licenseInfo = document.getElementById('licenseInfo');

  const correctUser = 'Blackoutpro';
  const correctPass = '12580';

  if (!u || !p) {
    message.textContent = 'Please enter username and password.';
    message.style.color = '#fca5a5';
    return false;
  }

  if (u === correctUser && p === correctPass) {
    const storedDate = localStorage.getItem('licenseActivated');
    const now = new Date();

    if (storedDate) {
      const activateDate = new Date(storedDate);
      const diffDays = Math.floor((now - activateDate)/(1000*60*60*24));
      if (diffDays < 30) {
        const daysLeft = 30 - diffDays;
        message.textContent = 'Login successful — welcome back!';
        message.style.color = '#86efac';
        licenseInfo.textContent = '🕒 লাইসেন্সের মেয়াদ শেষ হতে বাকি আছে: ' + daysLeft + ' দিন';
        return false;
      } else {
        localStorage.removeItem('licenseActivated');
        return askLicense();
      }
    } else {
      return askLicense();
    }
  } else {
    message.textContent = 'Username or password is incorrect.';
    message.style.color = '#fca5a5';
  }
  return false;
}

function askLicense() {
  const message = document.getElementById('message');
  const licenseInfo = document.getElementById('licenseInfo');
  const license = prompt('Please enter your license key:');
  if (license === '10258') {
    localStorage.setItem('licenseActivated', new Date().toISOString());
    message.textContent = 'License accepted! Login successful.';
    message.style.color = '#86efac';
    licenseInfo.textContent = '🕒 লাইসেন্সের মেয়াদ শেষ হতে বাকি আছে: 30 দিন';
  } else {
    message.innerHTML =
      'Invalid license key. লাইসেন্স পেতে টেলিগ্রামে জয়েন করুন: '+
      '<a href="https://t.me/+ZUtf8GenYKUwYjg1" target="_blank" class="underline text-indigo-400">Join Telegram</a>';
    message.style.color = '#fca5a5';
    licenseInfo.textContent = '';
  }
  return false;
}
</script>
</body>
</html>
